class t{static counter=0;children=[];watchers=[];constructor(t,e){this.id=t,this.parent=e,t=t||0}new(){t.counter++;const e=new t(t.counter,this);return this.children.push(e),e}eval(t){return t}watch(t){this.watchers.push(t)}digest(){let e,i=!1;do{i=!1;for(let n=0;n<this.watchers.length;n++){e=this.watchers[n];let s=this.eval(e.exp);t.equals(e.last,s)||(e.last=t.clone(s),i=!0,e.fn(s))}}while(i);for(let t=0;t<this.children.length;t++)this.children[t].digest()}static equals(t,e){return JSON.stringify(t)===JSON.stringify(e)}static clone(t){try{return JSON.parse(JSON.stringify(t))}catch(t){return}}}class e{_directives=new Map;_controller=new Map;static instance(){return e._instance||(e._instance=new e),e._instance}controller(t,e){this._controller.set(t,e)}directive(t,e){this._directives.set(t,e)}get(t){return this._directives.get(t)}}e.instance().directive("sqt-bind",{scope:!1,link:(t,e,i)=>{console.log("im triggered "+i),t.innerHTML=e.eval(i),e.watch({exp:i,fn:e=>{t.innerHTML=e},last:i})}}),e.instance().directive("sqt-click",{scope:!1,link:(t,e,i)=>{console.log("im triggered "+i),t.onclick=()=>{e.eval(i),e.digest()}}}),e.instance().controller("MainCtrl",t=>{}),class{static bootstrap(){const e=new t;this.compile(document.children[0],e)}static callDirectives(t,i){for(let n=0;n<t.attributes.length;n++){const s=t.attributes[n],c=e.instance().get(s.name);c&&t instanceof HTMLElement&&c.link(t,i,s.value)}}static compile(t,e){this.callDirectives(t,e);for(let i=0;i<t.children.length;i++){const n=t.children.item(i);null!==n&&this.compile(n,e)}}}.bootstrap();
